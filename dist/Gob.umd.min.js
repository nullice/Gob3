!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Gob=e()}(this,function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(t){return"string"==typeof t?t.split(/[\.\\/]/):t}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},c=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)},s={isEmptyObject:function(t){for(var e in t)return!1;return!0},objectCopyToObject:function(t,e,r,n,o,i){if(void 0!=e)for(var c in t){void 0!=i&&i(t,e,c);void 0!=r&&r(c,t[c]);var u=c;void 0!=n&&(u=n(c,t[c])),void 0!=t[c]&&t[c].constructor===Object?("object"!==a(e[u])&&(e[u]={}),this.objectCopyToObject(t[c],e[u],r,n,o)):e[u]=void 0!=o?o(c,t[c]):t[c]}},getObjectValueByNames:function(t,e,r){for(var n,o=0;o<e.length-(r||0);o++)if(0==o){if(void 0==(a=t[e[o]]))return;n=a}else{var a;if(void 0==(a=n[e[o]]))return;n=a}return n},setObjectValueByNames:function(t,e,r){var n=e.length;if(1!=n)for(var o=t,a=null,i=0;i<n;i++){if(a=e[i],i==n-1)return void(o[a]=r);a in o?o=o[a]:(o[a]={},o=o[a])}else t[e[0]]=r},deleteObjectValueByNames:function(t,e){var r=e.length;if(1!=r)for(var n=t,o=null,a=0;a<r;a++){if(o=e[a],a==r-1)return void delete n[o];n=n[o]}else delete t[e[0]]},treeFind:function(t,e,r,n,o){if("function"==typeof e)var a=e;else a=function(t){return t.id==e};var i=function t(e,r,n,o,i){for(var c=[],u=[],s=0;s<e.length;s++){var l=e[s];if(a(l)&&(c.push(l),!o))return c;if(l[n])if(i){var f=t(l[n],r,n,o,i);if(!o&&f.length>0)return f;c=c.concat(f)}else u.push(l[n])}if(!i)for(s=0;s<u.length;s++){if(f=t(u[s],r,n,o,i),!o&&f.length>0)return f;c=c.concat(f)}return c}(t,a,r,n,o);return n?i:i.length>0?i[0]:null},treeEach:function(t,e,r,n){var o=[],a=0,i=0;return e||(e=function(t){}),function t(e,r,n,c,u){u>i&&(i=u);var s=[];for(var l=0;l<e.length;l++){a++,void 0==o[u]?o[u]=1:o[u]++;var f=e[l];if(r(f,u,o[u],a,e,l))return;if(f[n])if(c){var p=t(f[n],r,n,c,u+1);if(p)return}else s.push(f[n])}if(!c)for(var l=0;l<s.length;l++){var p=t(s[l],r,n,c,u+1);if(p)return}return}(t,e,r,n,0),{struct:o,deep:i+1,total:a}},pathEach:function(t,e,r){if(r){var n="function"==typeof r,o=new WeakMap;o.set(t,!n||[])}!function t(i){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(var l in i){var f=i[l];if(r&&"object"===(void 0===f?"undefined":a(f))){var p=[].concat(u(c),[l]);if(o.get(f)){n&&r(f,p,o.get(f));continue}n?o.set(f,p):o.set(f,!0)}var p=[].concat(u(c),[l]);e(f,p,s),"object"===(void 0===f?"undefined":a(f))&&t(f,p,s+1)}}(t,[],0)}},l={getType:function(t){var e={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object","[object Error]":"error"};return null===t?"null":void 0===t?"undefined":"object"===(void 0===t?"undefined":a(t))||"function"==typeof t?e[e.toString.call(t)]||"object":void 0===t?"undefined":a(t)}};function f(t,e){return t(e={exports:{}},e.exports),e.exports}f(function(t){var e="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(e){var r=new Uint8Array(16);t.exports=function(){return e(r),r}}else{var n=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),n[e]=t>>>((3&e)<<3)&255;return n}}});for(var p=[],v=0;v<256;++v)p[v]=(v+256).toString(16).substr(1);var y=f(function(t,e){var r=Object.prototype.hasOwnProperty,n=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}();e.arrayToObject=function(t,e){for(var r=e&&e.plainObjects?Object.create(null):{},n=0;n<t.length;++n)void 0!==t[n]&&(r[n]=t[n]);return r},e.merge=function(t,n,o){if(!n)return t;if("object"!=typeof n){if(Array.isArray(t))t.push(n);else{if("object"!=typeof t)return[t,n];(o.plainObjects||o.allowPrototypes||!r.call(Object.prototype,n))&&(t[n]=!0)}return t}if("object"!=typeof t)return[t].concat(n);var a=t;return Array.isArray(t)&&!Array.isArray(n)&&(a=e.arrayToObject(t,o)),Array.isArray(t)&&Array.isArray(n)?(n.forEach(function(n,a){r.call(t,a)?t[a]&&"object"==typeof t[a]?t[a]=e.merge(t[a],n,o):t.push(n):t[a]=n}),t):Object.keys(n).reduce(function(t,a){var i=n[a];return r.call(t,a)?t[a]=e.merge(t[a],i,o):t[a]=i,t},a)},e.assign=function(t,e){return Object.keys(e).reduce(function(t,r){return t[r]=e[r],t},t)},e.decode=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},e.encode=function(t){if(0===t.length)return t;for(var e="string"==typeof t?t:String(t),r="",o=0;o<e.length;++o){var a=e.charCodeAt(o);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?r+=e.charAt(o):a<128?r+=n[a]:a<2048?r+=n[192|a>>6]+n[128|63&a]:a<55296||a>=57344?r+=n[224|a>>12]+n[128|a>>6&63]+n[128|63&a]:(o+=1,a=65536+((1023&a)<<10|1023&e.charCodeAt(o)),r+=n[240|a>>18]+n[128|a>>12&63]+n[128|a>>6&63]+n[128|63&a])}return r},e.compact=function(t){for(var e=[{obj:{o:t},prop:"o"}],r=[],n=0;n<e.length;++n)for(var o=e[n],a=o.obj[o.prop],i=Object.keys(a),c=0;c<i.length;++c){var u=i[c],s=a[u];"object"==typeof s&&null!==s&&-1===r.indexOf(s)&&(e.push({obj:a,prop:u}),r.push(s))}return function(t){for(var e;t.length;){var r=t.pop();if(e=r.obj[r.prop],Array.isArray(e)){for(var n=[],o=0;o<e.length;++o)void 0!==e[o]&&n.push(e[o]);r.obj[r.prop]=n}}return e}(e)},e.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},e.isBuffer=function(t){return null!==t&&void 0!==t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}}),b=(y.arrayToObject,y.merge,y.assign,y.decode,y.encode,y.compact,y.isRegExp,y.isBuffer,Date.prototype.toISOString,y.encode,y.decode,function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:64,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;i(this,t),this.cacheOb={},this.keyList=[],this.keyListOffset=0,this.keyMap={},this.maxSize=e,this.blankSize=r,this.size=0}c(t,[{key:"get",value:function(t){var e=this;if(void 0!==this.keyMap[t]){var r=this.keyMap[t]+this.keyListOffset;this.keyList[r]=void 0,this.keyList.push(t);var n=this.keyList.length-1;this.keyMap[t]=n-this.keyListOffset}return this.keyList.length>200&&setTimeout(function(){e.reMap()},0),this.cacheOb[t]}},{key:"set",value:function(t,e){this.size++,this.size>this.maxSize&&this.eliminate(),this.keyList.push(t);var r=this.keyList.length-1;return void 0!==this.keyMap[t]&&(this.keyList[this.keyMap[t]+this.keyListOffset]=void 0,this.size--),this.keyMap[t]=r-this.keyListOffset,this.cacheOb[t]=e}},{key:"eliminate",value:function(){for(var t=0,e=0;e<this.blankSize;t++){var r=this.keyList.shift();this.keyListOffset--,void 0!==r&&(delete this.cacheOb[r],delete this.keyMap[r],this.size--,e++)}}},{key:"reMap",value:function(){for(var t=[],e=0;e<this.keyList.length;e++){var r=this.keyList[e];void 0!==r&&t.push(r)}this.keyList=t,this.keyListOffset=0;for(e=0;e<this.keyList.length;e++){var n=this.keyList[e];this.keyMap[n]=e}}},{key:"clear",value:function(){this.cacheOb={},this.keyList=[],this.keyMap={},this.keyListOffset=0,this.size=0}}])}(),{rcType:l,rcObject:s,name:"util"}),h="[PROXY]";function g(t){return"string"==typeof t?t.split(/[\.\\/]/):t}var d=b.rcType,j=b.rcObject;function O(t,e,r,o){var a={},i=new Proxy(t,function(t,e,r,o){return{set:function(a,i,c){if(i==o.GOB_CORE_NAME)return!0;var u=n(r).concat([i]),s={loaclData:t,localGate:e,state:o};return o.gobCore.stimuliBus.receptor("set",u,c,null,s)},get:function(u,s){if(s==o.GOB_CORE_NAME)return o.gobCore;if("$get"==s)return a;if("$set"==s)return i;if("$delete"==s)return c;if("$core"==s)return o.gobCore;var l=n(r).concat([s]),f={loaclData:t,localGate:e,state:o};return o.gobCore.stimuliBus.receptor("get",l,void 0,null,f)},deleteProperty:function(a,i){if(i==o.GOB_CORE_NAME)return!0;console.log("called: "+i);var c=n(r).concat([i]),u={loaclData:t,localGate:e,state:o};return o.gobCore.stimuliBus.receptor("delete",c,null,null,u)}};function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=g(t),i=n(r).concat(n(a));return console.log("$get",i),o.gobCore.stimuliBus.receptor("get",i,void 0,e)}function i(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=g(t),c=n(r).concat(n(i));return console.log("$set",c,e),o.gobCore.stimuliBus.receptor("set",c,e,a)}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=g(t),i=n(r).concat(n(a));return console.log("$delete",i),o.gobCore.stimuliBus.receptor("delete",i,void 0,e)}}(t,a,r,o.state));return a[h]=i,j.setObjectValueByNames(o.localGate,e,a),a}var _=b.rcType;var m=b.rcType;var A=null;function w(t,e,r){A={stimuliType:t,path:e,loaclDataIsArray:r}}var k=b.rcObject,S=function(){function o(t){e(this,o),this.stimuliLog={changes:[],visits:[],indexes:{set:0,get:0,delete:0,all:0},latestPath:null,latestType:null},this.gobCore=t}var a,i,c;return a=o,(i=[{key:"receptor",value:function(e,r,o,a,i){switch(console.log("[receptor]",i?"<Handler>":"<noHandler>",e,r),i&&(function(t,e,r){var n=Array.isArray(r.loaclData);return n&&"length"===e[e.length-1]&&A&&"set"===A.stimuliType&&1==A.loaclDataIsArray&&A.path&&"length"!==A.path[A.path.length-1]?(w(t,e,n),!0):(w(t,e,n),!1)}(e,r,i)||this.recordStimuli(e,r,o,a)),e){case"get":return i?function(t,e,r){var n=r.loaclData[e];console.log("[get]",t,{loaclData:r.loaclData,key:e});var o=_.getType(n);return console.log("  [get value]",n,o),"object"===o||"array"===o?(console.log("  [find gates]",t),r.localGate[e][h]):(console.log("  return value",n),n)}(r,r[r.length-1],i):k.getObjectValueByNames(this.gobCore.proxy,r,null);case"set":return i?function(e,r,o,a){var i=d.getType(r);return console.log("[set]","fullPath:",e,{valueType:i,key:o,value:r}),"object"===i||"array"===i?(a.loaclData[o]=r,O(r,[o],e,a),j.pathEach(r,function(r,i){"object"===t(r)&&O(r,[o].concat(n(i)),n(e).concat(n(i)),a)},function(t,e,r){var i;i=0==r.length?a.localGate[o]:j.getObjectValueByNames(a.localGate,[o,r],null),j.setObjectValueByNames(a.localGate,[o].concat(n(e)),i)})):a.loaclData[o]=r,!0}(r,o,r[r.length-1],i):k.setObjectValueByNames(this.gobCore.proxy,r,o);case"delete":return i?function(t,e,r,n){return m.getType(e),console.log("[del]","fullPath:",t,{key:r}),delete n.loaclData[r]}(r,o,r[r.length-1],i):k.deleteObjectValueByNames(this.gobCore.proxy,r)}}},{key:"recordStimuli",value:function(t,e,r,n){var o=this;if(!0!==this.gobCore.options.disableLog&&(!this.gobCore.options.logType||!1!==this.gobCore.options.logType[t])){this.stimuliLog.latestPath=e,this.stimuliLog.latestType=t;var a=this.stimuliLog.indexes.all++,i=this.stimuliLog.indexes[t]++,c=function(){var c={type:t,path:e,value:o.gobCore.GobFactory.default.cloneDeep(r),origin:n,info:{index:a,typeIndex:i}};console.log("[Stimuli]",c),"set"===t||"delete"===t?o.stimuliLog.changes.push(c):o.stimuliLog.visits.push(c)};!0===this.gobCore.options.syncLog?c():setTimeout(c,0)}}},{key:"getLatestStimuliSign",value:function(){if(this.stimuliLog.latestType)return{type:this.stimuliLog.latestType,path:this.stimuliLog.latestPath}}}])&&r(a.prototype,i),c&&r(a,c),o}();var C=function(){this.__data__=[],this.size=0};var x=function(t,e){return t===e||t!=t&&e!=e};var B=function(t,e){for(var r=t.length;r--;)if(x(t[r][0],e))return r;return-1},E=Array.prototype.splice;var L=function(t){var e=this.__data__,r=B(e,t);return!(r<0||(r==e.length-1?e.pop():E.call(e,r,1),--this.size,0))};var T=function(t){var e=this.__data__,r=B(e,t);return r<0?void 0:e[r][1]};var P=function(t){return B(this.__data__,t)>-1};var M=function(t,e){var r=this.__data__,n=B(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function G(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}G.prototype.clear=C,G.prototype.delete=L,G.prototype.get=T,G.prototype.has=P,G.prototype.set=M;var z=G;var D=function(){this.__data__=new z,this.size=0};var I=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r};var N=function(t){return this.__data__.get(t)};var $=function(t){return this.__data__.has(t)},F="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function R(t,e){return t(e={exports:{}},e.exports),e.exports}var U="object"==typeof F&&F&&F.Object===Object&&F,V="object"==typeof self&&self&&self.Object===Object&&self,W=U||V||Function("return this")(),q=W.Symbol,H=Object.prototype,X=H.hasOwnProperty,Y=H.toString,J=q?q.toStringTag:void 0;var K=function(t){var e=X.call(t,J),r=t[J];try{t[J]=void 0;var n=!0}catch(t){}var o=Y.call(t);return n&&(e?t[J]=r:delete t[J]),o},Q=Object.prototype.toString;var Z=function(t){return Q.call(t)},tt="[object Null]",et="[object Undefined]",rt=q?q.toStringTag:void 0;var nt=function(t){return null==t?void 0===t?et:tt:rt&&rt in Object(t)?K(t):Z(t)};var ot=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},at="[object AsyncFunction]",it="[object Function]",ct="[object GeneratorFunction]",ut="[object Proxy]";var st,lt=function(t){if(!ot(t))return!1;var e=nt(t);return e==it||e==ct||e==at||e==ut},ft=W["__core-js_shared__"],pt=(st=/[^.]+$/.exec(ft&&ft.keys&&ft.keys.IE_PROTO||""))?"Symbol(src)_1."+st:"";var vt=function(t){return!!pt&&pt in t},yt=Function.prototype.toString;var bt=function(t){if(null!=t){try{return yt.call(t)}catch(t){}try{return t+""}catch(t){}}return""},ht=/^\[object .+?Constructor\]$/,gt=Function.prototype,dt=Object.prototype,jt=gt.toString,Ot=dt.hasOwnProperty,_t=RegExp("^"+jt.call(Ot).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var mt=function(t){return!(!ot(t)||vt(t))&&(lt(t)?_t:ht).test(bt(t))};var At=function(t,e){return null==t?void 0:t[e]};var wt=function(t,e){var r=At(t,e);return mt(r)?r:void 0},kt=wt(W,"Map"),St=wt(Object,"create");var Ct=function(){this.__data__=St?St(null):{},this.size=0};var xt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Bt="__lodash_hash_undefined__",Et=Object.prototype.hasOwnProperty;var Lt=function(t){var e=this.__data__;if(St){var r=e[t];return r===Bt?void 0:r}return Et.call(e,t)?e[t]:void 0},Tt=Object.prototype.hasOwnProperty;var Pt=function(t){var e=this.__data__;return St?void 0!==e[t]:Tt.call(e,t)},Mt="__lodash_hash_undefined__";var Gt=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=St&&void 0===e?Mt:e,this};function zt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}zt.prototype.clear=Ct,zt.prototype.delete=xt,zt.prototype.get=Lt,zt.prototype.has=Pt,zt.prototype.set=Gt;var Dt=zt;var It=function(){this.size=0,this.__data__={hash:new Dt,map:new(kt||z),string:new Dt}};var Nt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var $t=function(t,e){var r=t.__data__;return Nt(e)?r["string"==typeof e?"string":"hash"]:r.map};var Ft=function(t){var e=$t(this,t).delete(t);return this.size-=e?1:0,e};var Rt=function(t){return $t(this,t).get(t)};var Ut=function(t){return $t(this,t).has(t)};var Vt=function(t,e){var r=$t(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function Wt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Wt.prototype.clear=It,Wt.prototype.delete=Ft,Wt.prototype.get=Rt,Wt.prototype.has=Ut,Wt.prototype.set=Vt;var qt=Wt,Ht=200;var Xt=function(t,e){var r=this.__data__;if(r instanceof z){var n=r.__data__;if(!kt||n.length<Ht-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new qt(n)}return r.set(t,e),this.size=r.size,this};function Yt(t){var e=this.__data__=new z(t);this.size=e.size}Yt.prototype.clear=D,Yt.prototype.delete=I,Yt.prototype.get=N,Yt.prototype.has=$,Yt.prototype.set=Xt;var Jt=Yt;var Kt=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t},Qt=function(){try{var t=wt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var Zt=function(t,e,r){"__proto__"==e&&Qt?Qt(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},te=Object.prototype.hasOwnProperty;var ee=function(t,e,r){var n=t[e];te.call(t,e)&&x(n,r)&&(void 0!==r||e in t)||Zt(t,e,r)};var re=function(t,e,r,n){var o=!r;r||(r={});for(var a=-1,i=e.length;++a<i;){var c=e[a],u=n?n(r[c],t[c],c,r,t):void 0;void 0===u&&(u=t[c]),o?Zt(r,c,u):ee(r,c,u)}return r};var ne=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n};var oe=function(t){return null!=t&&"object"==typeof t},ae="[object Arguments]";var ie=function(t){return oe(t)&&nt(t)==ae},ce=Object.prototype,ue=ce.hasOwnProperty,se=ce.propertyIsEnumerable,le=ie(function(){return arguments}())?ie:function(t){return oe(t)&&ue.call(t,"callee")&&!se.call(t,"callee")},fe=Array.isArray;var pe=function(){return!1},ve=R(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r?W.Buffer:void 0,a=(o?o.isBuffer:void 0)||pe;t.exports=a}),ye=9007199254740991,be=/^(?:0|[1-9]\d*)$/;var he=function(t,e){var r=typeof t;return!!(e=null==e?ye:e)&&("number"==r||"symbol"!=r&&be.test(t))&&t>-1&&t%1==0&&t<e},ge=9007199254740991;var de=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=ge},je={};je["[object Float32Array]"]=je["[object Float64Array]"]=je["[object Int8Array]"]=je["[object Int16Array]"]=je["[object Int32Array]"]=je["[object Uint8Array]"]=je["[object Uint8ClampedArray]"]=je["[object Uint16Array]"]=je["[object Uint32Array]"]=!0,je["[object Arguments]"]=je["[object Array]"]=je["[object ArrayBuffer]"]=je["[object Boolean]"]=je["[object DataView]"]=je["[object Date]"]=je["[object Error]"]=je["[object Function]"]=je["[object Map]"]=je["[object Number]"]=je["[object Object]"]=je["[object RegExp]"]=je["[object Set]"]=je["[object String]"]=je["[object WeakMap]"]=!1;var Oe=function(t){return oe(t)&&de(t.length)&&!!je[nt(t)]};var _e=function(t){return function(e){return t(e)}},me=R(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r&&U.process,a=function(){try{var t=n&&n.require&&n.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=a}),Ae=me&&me.isTypedArray,we=Ae?_e(Ae):Oe,ke=Object.prototype.hasOwnProperty;var Se=function(t,e){var r=fe(t),n=!r&&le(t),o=!r&&!n&&ve(t),a=!r&&!n&&!o&&we(t),i=r||n||o||a,c=i?ne(t.length,String):[],u=c.length;for(var s in t)!e&&!ke.call(t,s)||i&&("length"==s||o&&("offset"==s||"parent"==s)||a&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||he(s,u))||c.push(s);return c},Ce=Object.prototype;var xe=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ce)};var Be=function(t,e){return function(r){return t(e(r))}},Ee=Be(Object.keys,Object),Le=Object.prototype.hasOwnProperty;var Te=function(t){if(!xe(t))return Ee(t);var e=[];for(var r in Object(t))Le.call(t,r)&&"constructor"!=r&&e.push(r);return e};var Pe=function(t){return null!=t&&de(t.length)&&!lt(t)};var Me=function(t){return Pe(t)?Se(t):Te(t)};var Ge=function(t,e){return t&&re(e,Me(e),t)};var ze=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e},De=Object.prototype.hasOwnProperty;var Ie=function(t){if(!ot(t))return ze(t);var e=xe(t),r=[];for(var n in t)("constructor"!=n||!e&&De.call(t,n))&&r.push(n);return r};var Ne=function(t){return Pe(t)?Se(t,!0):Ie(t)};var $e=function(t,e){return t&&re(e,Ne(e),t)},Fe=R(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r?W.Buffer:void 0,a=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var r=t.length,n=a?a(r):new t.constructor(r);return t.copy(n),n}});var Re=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e};var Ue=function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,a=[];++r<n;){var i=t[r];e(i,r,t)&&(a[o++]=i)}return a};var Ve=function(){return[]},We=Object.prototype.propertyIsEnumerable,qe=Object.getOwnPropertySymbols,He=qe?function(t){return null==t?[]:(t=Object(t),Ue(qe(t),function(e){return We.call(t,e)}))}:Ve;var Xe=function(t,e){return re(t,He(t),e)};var Ye=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t},Je=Be(Object.getPrototypeOf,Object),Ke=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Ye(e,He(t)),t=Je(t);return e}:Ve;var Qe=function(t,e){return re(t,Ke(t),e)};var Ze=function(t,e,r){var n=e(t);return fe(t)?n:Ye(n,r(t))};var tr=function(t){return Ze(t,Me,He)};var er=function(t){return Ze(t,Ne,Ke)},rr=wt(W,"DataView"),nr=wt(W,"Promise"),or=wt(W,"Set"),ar=wt(W,"WeakMap"),ir=bt(rr),cr=bt(kt),ur=bt(nr),sr=bt(or),lr=bt(ar),fr=nt;(rr&&"[object DataView]"!=fr(new rr(new ArrayBuffer(1)))||kt&&"[object Map]"!=fr(new kt)||nr&&"[object Promise]"!=fr(nr.resolve())||or&&"[object Set]"!=fr(new or)||ar&&"[object WeakMap]"!=fr(new ar))&&(fr=function(t){var e=nt(t),r="[object Object]"==e?t.constructor:void 0,n=r?bt(r):"";if(n)switch(n){case ir:return"[object DataView]";case cr:return"[object Map]";case ur:return"[object Promise]";case sr:return"[object Set]";case lr:return"[object WeakMap]"}return e});var pr=fr,vr=Object.prototype.hasOwnProperty;var yr=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&vr.call(t,"index")&&(r.index=t.index,r.input=t.input),r},br=W.Uint8Array;var hr=function(t){var e=new t.constructor(t.byteLength);return new br(e).set(new br(t)),e};var gr=function(t,e){var r=e?hr(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)},dr=/\w*$/;var jr=function(t){var e=new t.constructor(t.source,dr.exec(t));return e.lastIndex=t.lastIndex,e},Or=q?q.prototype:void 0,_r=Or?Or.valueOf:void 0;var mr=function(t){return _r?Object(_r.call(t)):{}};var Ar=function(t,e){var r=e?hr(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)},wr="[object Boolean]",kr="[object Date]",Sr="[object Map]",Cr="[object Number]",xr="[object RegExp]",Br="[object Set]",Er="[object String]",Lr="[object Symbol]",Tr="[object ArrayBuffer]",Pr="[object DataView]",Mr="[object Float32Array]",Gr="[object Float64Array]",zr="[object Int8Array]",Dr="[object Int16Array]",Ir="[object Int32Array]",Nr="[object Uint8Array]",$r="[object Uint8ClampedArray]",Fr="[object Uint16Array]",Rr="[object Uint32Array]";var Ur=function(t,e,r){var n=t.constructor;switch(e){case Tr:return hr(t);case wr:case kr:return new n(+t);case Pr:return gr(t,r);case Mr:case Gr:case zr:case Dr:case Ir:case Nr:case $r:case Fr:case Rr:return Ar(t,r);case Sr:return new n;case Cr:case Er:return new n(t);case xr:return jr(t);case Br:return new n;case Lr:return mr(t)}},Vr=Object.create,Wr=function(){function t(){}return function(e){if(!ot(e))return{};if(Vr)return Vr(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();var qr=function(t){return"function"!=typeof t.constructor||xe(t)?{}:Wr(Je(t))},Hr="[object Map]";var Xr=function(t){return oe(t)&&pr(t)==Hr},Yr=me&&me.isMap,Jr=Yr?_e(Yr):Xr,Kr="[object Set]";var Qr=function(t){return oe(t)&&pr(t)==Kr},Zr=me&&me.isSet,tn=Zr?_e(Zr):Qr,en=1,rn=2,nn=4,on="[object Arguments]",an="[object Function]",cn="[object GeneratorFunction]",un="[object Object]",sn={};sn[on]=sn["[object Array]"]=sn["[object ArrayBuffer]"]=sn["[object DataView]"]=sn["[object Boolean]"]=sn["[object Date]"]=sn["[object Float32Array]"]=sn["[object Float64Array]"]=sn["[object Int8Array]"]=sn["[object Int16Array]"]=sn["[object Int32Array]"]=sn["[object Map]"]=sn["[object Number]"]=sn[un]=sn["[object RegExp]"]=sn["[object Set]"]=sn["[object String]"]=sn["[object Symbol]"]=sn["[object Uint8Array]"]=sn["[object Uint8ClampedArray]"]=sn["[object Uint16Array]"]=sn["[object Uint32Array]"]=!0,sn["[object Error]"]=sn[an]=sn["[object WeakMap]"]=!1;var ln=function t(e,r,n,o,a,i){var c,u=r&en,s=r&rn,l=r&nn;if(n&&(c=a?n(e,o,a,i):n(e)),void 0!==c)return c;if(!ot(e))return e;var f=fe(e);if(f){if(c=yr(e),!u)return Re(e,c)}else{var p=pr(e),v=p==an||p==cn;if(ve(e))return Fe(e,u);if(p==un||p==on||v&&!a){if(c=s||v?{}:qr(e),!u)return s?Qe(e,$e(c,e)):Xe(e,Ge(c,e))}else{if(!sn[p])return a?e:{};c=Ur(e,p,u)}}i||(i=new Jt);var y=i.get(e);if(y)return y;if(i.set(e,c),tn(e))return e.forEach(function(o){c.add(t(o,r,n,o,e,i))}),c;if(Jr(e))return e.forEach(function(o,a){c.set(a,t(o,r,n,a,e,i))}),c;var b=l?s?er:tr:s?keysIn:Me,h=f?void 0:b(e);return Kt(h||e,function(o,a){h&&(o=e[a=o]),ee(c,a,t(o,r,n,a,e,i))}),c},fn=1,pn=4;var vn=function(t){return ln(t,fn|pn)},yn=function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,t),this.GobFactory=bn,this.stimuliBus=new S(this),this.isGob=3,this.data={},this.gate={},this.options=Object.assign({},t.DEFAULT_OPTIONS,r)};yn.DEFAULT_OPTIONS={syncLog:!1,disableLog:!1,logType:{set:!0,get:!1,delete:!0},logSize:2048};var bn=function(t,e){var r=new yn(e),a=new Proxy(r.data,function(t,e,r,a){return{set:function(o,i,c){if(i==a.GOB_CORE_NAME)return!0;var u=n(r).concat([i]),s={loaclData:t,localGate:e,state:a};return a.gobCore.stimuliBus.receptor("set",u,c,null,s)},get:function(o,s){if(s==a.GOB_CORE_NAME)return a.gobCore;if("$get"==s)return i;if("$set"==s)return c;if("$delete"==s)return u;if("$core"==s)return a.gobCore;var l=n(r).concat([s]),f={loaclData:t,localGate:e,state:a};return a.gobCore.stimuliBus.receptor("get",l,void 0,null,f)},deleteProperty:function(o,i){if(i==a.GOB_CORE_NAME)return!0;console.log("called: "+i);var c=n(r).concat([i]),u={loaclData:t,localGate:e,state:a};return a.gobCore.stimuliBus.receptor("delete",c,null,null,u)}};function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=o(t),c=n(r).concat(n(i));return console.log("$get",c),a.gobCore.stimuliBus.receptor("get",c,void 0,e)}function c(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c=o(t),u=n(r).concat(n(c));return console.log("$set",u,e),a.gobCore.stimuliBus.receptor("set",u,e,i)}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=o(t),c=n(r).concat(n(i));return console.log("$delete",c),a.gobCore.stimuliBus.receptor("delete",c,void 0,e)}}(r.data,r.gate,[],{coreData:r.data,coreGate:r.gate,gobCore:r,GOB_CORE_NAME:"[Gob Core]"}));if(t)for(var i in t)a[i]=t[i];return r.proxy=a,a};return bn.default={options:{},cloneDeep:vn},bn.GOB_CORE_NAME="[Gob Core]",bn.inspect=function(t){if(t["[Gob Core]"])return t["[Gob Core]"];throw Error("Gob.inspect: param is not Gob3 Instance. :"+t)},bn});
