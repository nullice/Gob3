!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Gob=e()}(this,function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function i(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)},f={isEmptyObject:function(t){for(var e in t)return!1;return!0},objectCopyToObject:function(t,e,r,n,o,i){if(void 0!=e)for(var a in t){void 0!=i&&i(t,e,a);void 0!=r&&r(a,t[a]);var s=a;void 0!=n&&(s=n(a,t[a])),void 0!=t[a]&&t[a].constructor===Object?("object"!==c(e[s])&&(e[s]={}),this.objectCopyToObject(t[a],e[s],r,n,o)):e[s]=void 0!=o?o(a,t[a]):t[a]}},getObjectValueByNames:function(t,e,r){for(var n,o=0;o<e.length-(r||0);o++)if(0==o){if(void 0==(i=t[e[o]]))return;n=i}else{var i;if(void 0==(i=n[e[o]]))return;n=i}return n},setObjectValueByNames:function(t,e,r){var n=e.length;if(1!=n)for(var o=t,i=null,a=0;a<n;a++){if(i=e[a],a==n-1)return void(o[i]=r);i in o?o=o[i]:(o[i]={},o=o[i])}else t[e[0]]=r},deleteObjectValueByNames:function(t,e){var r=e.length;if(1!=r)for(var n=t,o=null,i=0;i<r;i++){if(o=e[i],i==r-1)return void delete n[o];n=n[o]}else delete t[e[0]]},treeFind:function(t,e,r,n,o){if("function"==typeof e)var i=e;else i=function(t){return t.id==e};var a=function t(e,r,n,o,a){for(var c=[],s=[],u=0;u<e.length;u++){var l=e[u];if(i(l)&&(c.push(l),!o))return c;if(l[n])if(a){var f=t(l[n],r,n,o,a);if(!o&&f.length>0)return f;c=c.concat(f)}else s.push(l[n])}if(!a)for(u=0;u<s.length;u++){if(f=t(s[u],r,n,o,a),!o&&f.length>0)return f;c=c.concat(f)}return c}(t,i,r,n,o);return n?a:a.length>0?a[0]:null},treeEach:function(t,e,r,n){var o=[],i=0,a=0;return e||(e=function(t){}),function t(e,r,n,c,s){s>a&&(a=s);var u=[];for(var l=0;l<e.length;l++){i++,void 0==o[s]?o[s]=1:o[s]++;var f=e[l];if(r(f,s,o[s],i,e,l))return;if(f[n])if(c){var p=t(f[n],r,n,c,s+1);if(p)return}else u.push(f[n])}if(!c)for(var l=0;l<u.length;l++){var p=t(u[l],r,n,c,s+1);if(p)return}return}(t,e,r,n,0),{struct:o,deep:a+1,total:i}},pathEach:function(t,e,r){if(r){var n="function"==typeof r,o=new WeakMap;o.set(t,!n||[])}!function t(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(var u in i){var f=i[u];if(r&&"object"===(void 0===f?"undefined":c(f))){var p=[].concat(l(a),[u]);if(o.get(f)){n&&r(f,p,o.get(f));continue}n?o.set(f,p):o.set(f,!0)}var p=[].concat(l(a),[u]);e(f,p,s),"object"===(void 0===f?"undefined":c(f))&&t(f,p,s+1)}}(t,[],0)}},p={getType:function(t){var e={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object","[object Error]":"error"};return null===t?"null":void 0===t?"undefined":"object"===(void 0===t?"undefined":c(t))||"function"==typeof t?e[e.toString.call(t)]||"object":void 0===t?"undefined":c(t)}};function h(t,e){return t(e={exports:{}},e.exports),e.exports}h(function(t){var e="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(e){var r=new Uint8Array(16);t.exports=function(){return e(r),r}}else{var n=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),n[e]=t>>>((3&e)<<3)&255;return n}}});for(var y=[],v=0;v<256;++v)y[v]=(v+256).toString(16).substr(1);var b=h(function(t,e){var r=Object.prototype.hasOwnProperty,n=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}();e.arrayToObject=function(t,e){for(var r=e&&e.plainObjects?Object.create(null):{},n=0;n<t.length;++n)void 0!==t[n]&&(r[n]=t[n]);return r},e.merge=function(t,n,o){if(!n)return t;if("object"!=typeof n){if(Array.isArray(t))t.push(n);else{if("object"!=typeof t)return[t,n];(o.plainObjects||o.allowPrototypes||!r.call(Object.prototype,n))&&(t[n]=!0)}return t}if("object"!=typeof t)return[t].concat(n);var i=t;return Array.isArray(t)&&!Array.isArray(n)&&(i=e.arrayToObject(t,o)),Array.isArray(t)&&Array.isArray(n)?(n.forEach(function(n,i){r.call(t,i)?t[i]&&"object"==typeof t[i]?t[i]=e.merge(t[i],n,o):t.push(n):t[i]=n}),t):Object.keys(n).reduce(function(t,i){var a=n[i];return r.call(t,i)?t[i]=e.merge(t[i],a,o):t[i]=a,t},i)},e.assign=function(t,e){return Object.keys(e).reduce(function(t,r){return t[r]=e[r],t},t)},e.decode=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},e.encode=function(t){if(0===t.length)return t;for(var e="string"==typeof t?t:String(t),r="",o=0;o<e.length;++o){var i=e.charCodeAt(o);45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?r+=e.charAt(o):i<128?r+=n[i]:i<2048?r+=n[192|i>>6]+n[128|63&i]:i<55296||i>=57344?r+=n[224|i>>12]+n[128|i>>6&63]+n[128|63&i]:(o+=1,i=65536+((1023&i)<<10|1023&e.charCodeAt(o)),r+=n[240|i>>18]+n[128|i>>12&63]+n[128|i>>6&63]+n[128|63&i])}return r},e.compact=function(t){for(var e=[{obj:{o:t},prop:"o"}],r=[],n=0;n<e.length;++n)for(var o=e[n],i=o.obj[o.prop],a=Object.keys(i),c=0;c<a.length;++c){var s=a[c],u=i[s];"object"==typeof u&&null!==u&&-1===r.indexOf(u)&&(e.push({obj:i,prop:s}),r.push(u))}return function(t){for(var e;t.length;){var r=t.pop();if(e=r.obj[r.prop],Array.isArray(e)){for(var n=[],o=0;o<e.length;++o)void 0!==e[o]&&n.push(e[o]);r.obj[r.prop]=n}}return e}(e)},e.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},e.isBuffer=function(t){return null!==t&&void 0!==t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}}),g=(b.arrayToObject,b.merge,b.assign,b.decode,b.encode,b.compact,b.isRegExp,b.isBuffer,Date.prototype.toISOString,b.encode,b.decode,function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:64,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;s(this,t),this.cacheOb={},this.keyList=[],this.keyListOffset=0,this.keyMap={},this.maxSize=e,this.blankSize=r,this.size=0}u(t,[{key:"get",value:function(t){var e=this;if(void 0!==this.keyMap[t]){var r=this.keyMap[t]+this.keyListOffset;this.keyList[r]=void 0,this.keyList.push(t);var n=this.keyList.length-1;this.keyMap[t]=n-this.keyListOffset}return this.keyList.length>200&&setTimeout(function(){e.reMap()},0),this.cacheOb[t]}},{key:"set",value:function(t,e){this.size++,this.size>this.maxSize&&this.eliminate(),this.keyList.push(t);var r=this.keyList.length-1;return void 0!==this.keyMap[t]&&(this.keyList[this.keyMap[t]+this.keyListOffset]=void 0,this.size--),this.keyMap[t]=r-this.keyListOffset,this.cacheOb[t]=e}},{key:"eliminate",value:function(){for(var t=0,e=0;e<this.blankSize;t++){var r=this.keyList.shift();this.keyListOffset--,void 0!==r&&(delete this.cacheOb[r],delete this.keyMap[r],this.size--,e++)}}},{key:"reMap",value:function(){for(var t=[],e=0;e<this.keyList.length;e++){var r=this.keyList[e];void 0!==r&&t.push(r)}this.keyList=t,this.keyListOffset=0;for(e=0;e<this.keyList.length;e++){var n=this.keyList[e];this.keyMap[n]=e}}},{key:"clear",value:function(){this.cacheOb={},this.keyList=[],this.keyMap={},this.keyListOffset=0,this.size=0}}])}(),function(t,e){for(var r=[],n=0;n<t.length;n++){var o=e(t[n],n);d(o)?r.push.apply(r,o):r.push(o)}return r}),d=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},j=m;function m(t,e,r){t instanceof RegExp&&(t=O(t,r)),e instanceof RegExp&&(e=O(e,r));var n=_(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function O(t,e){var r=e.match(t);return r?r[0]:null}function _(t,e,r){var n,o,i,a,c,s=r.indexOf(t),u=r.indexOf(e,s+1),l=s;if(s>=0&&u>0){for(n=[],i=r.length;l>=0&&!c;)l==s?(n.push(l),s=r.indexOf(t,l+1)):1==n.length?c=[n.pop(),u]:((o=n.pop())<i&&(i=o,a=u),u=r.indexOf(e,l+1)),l=s<u&&s>=0?s:u;n.length&&(c=[i,a])}return c}m.range=_;var w=function(t){if(!t)return[];"{}"===t.substr(0,2)&&(t="\\{\\}"+t.substr(2));return function t(e,r){var n=[];var o=j("{","}",e);if(!o||/\$$/.test(o.pre))return[e];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(o.body);var a=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(o.body);var c=i||a;var s=o.body.indexOf(",")>=0;if(!c&&!s)return o.post.match(/,.*\}/)?(e=o.pre+"{"+o.body+k+o.post,t(e)):[e];var u;if(c)u=o.body.split(/\.\./);else if(1===(u=function t(e){if(!e)return[""];var r=[];var n=j("{","}",e);if(!n)return e.split(",");var o=n.pre;var i=n.body;var a=n.post;var c=o.split(",");c[c.length-1]+="{"+i+"}";var s=t(a);a.length&&(c[c.length-1]+=s.shift(),c.push.apply(c,s));r.push.apply(r,c);return r}(o.body)).length&&1===(u=t(u[0],!1).map(C)).length){var l=o.post.length?t(o.post,!1):[""];return l.map(function(t){return o.pre+u[0]+t})}var f=o.pre;var l=o.post.length?t(o.post,!1):[""];var p;if(c){var h=P(u[0]),y=P(u[1]),v=Math.max(u[0].length,u[1].length),b=3==u.length?Math.abs(P(u[2])):1,d=F,m=y<h;m&&(b*=-1,d=L);var O=u.some(M);p=[];for(var _=h;d(_,y);_+=b){var w;if(a)"\\"===(w=String.fromCharCode(_))&&(w="");else if(w=String(_),O){var A=v-w.length;if(A>0){var S=new Array(A+1).join("0");w=_<0?"-"+S+w.slice(1):S+w}}p.push(w)}}else p=g(u,function(e){return t(e,!1)});for(var x=0;x<p.length;x++)for(var E=0;E<l.length;E++){var T=f+p[x]+l[E];(!r||c||T)&&n.push(T)}return n}(function(t){return t.split("\\\\").join(A).split("\\{").join(S).split("\\}").join(k).split("\\,").join(x).split("\\.").join(E)}(t),!0).map(T)},A="\0SLASH"+Math.random()+"\0",S="\0OPEN"+Math.random()+"\0",k="\0CLOSE"+Math.random()+"\0",x="\0COMMA"+Math.random()+"\0",E="\0PERIOD"+Math.random()+"\0";function P(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function T(t){return t.split(A).join("\\").split(S).join("{").split(k).join("}").split(x).join(",").split(E).join(".")}function C(t){return"{"+t+"}"}function M(t){return/^-?0\d/.test(t)}function F(t,e){return t<=e}function L(t,e){return t>=e}var B=W;W.Minimatch=q;var z={sep:"/"},D=W.GLOBSTAR=q.GLOBSTAR={},N={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},R="[^/]",$=R+"*?",I="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",G="(?:(?!(?:\\/|^)\\.).)*?",U="().*{}+?[]^$\\!".split("").reduce(function(t,e){return t[e]=!0,t},{});var V=/\/+/;function H(t,e){t=t||{},e=e||{};var r={};return Object.keys(e).forEach(function(t){r[t]=e[t]}),Object.keys(t).forEach(function(e){r[e]=t[e]}),r}function W(t,e,r){if("string"!=typeof e)throw new TypeError("glob pattern string required");return r||(r={}),!(!r.nocomment&&"#"===e.charAt(0))&&(""===e.trim()?""===t:new q(e,r).match(t))}function q(t,e){if(!(this instanceof q))return new q(t,e);if("string"!=typeof t)throw new TypeError("glob pattern string required");e||(e={}),t=t.trim(),"/"!==z.sep&&(t=t.split(z.sep).join("/")),this.options=e,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function Z(t,e){if(e||(e=this instanceof q?this.options:{}),void 0===(t=void 0===t?this.pattern:t))throw new TypeError("undefined pattern");return e.nobrace||!t.match(/\{.*\}/)?[t]:w(t)}W.filter=function(t,e){return e=e||{},function(r,n,o){return W(r,t,e)}},W.defaults=function(t){if(!t||!Object.keys(t).length)return W;var e=W,r=function(r,n,o){return e.minimatch(r,n,H(t,o))};return r.Minimatch=function(r,n){return new e.Minimatch(r,H(t,n))},r},q.defaults=function(t){return t&&Object.keys(t).length?W.defaults(t).Minimatch:q},q.prototype.debug=function(){},q.prototype.make=function(){if(this._made)return;var t=this.pattern,e=this.options;if(!e.nocomment&&"#"===t.charAt(0))return void(this.comment=!0);if(!t)return void(this.empty=!0);this.parseNegate();var r=this.globSet=this.braceExpand();e.debug&&(this.debug=console.error);this.debug(this.pattern,r),r=this.globParts=r.map(function(t){return t.split(V)}),this.debug(this.pattern,r),r=r.map(function(t,e,r){return t.map(this.parse,this)},this),this.debug(this.pattern,r),r=r.filter(function(t){return-1===t.indexOf(!1)}),this.debug(this.pattern,r),this.set=r},q.prototype.parseNegate=function(){var t=this.pattern,e=!1,r=0;if(this.options.nonegate)return;for(var n=0,o=t.length;n<o&&"!"===t.charAt(n);n++)e=!e,r++;r&&(this.pattern=t.substr(r));this.negate=e},W.braceExpand=function(t,e){return Z(t,e)},q.prototype.braceExpand=Z,q.prototype.parse=function(t,e){if(t.length>65536)throw new TypeError("pattern is too long");var r=this.options;if(!r.noglobstar&&"**"===t)return D;if(""===t)return"";var n,o="",i=!!r.nocase,a=!1,c=[],s=[],u=!1,l=-1,f=-1,p="."===t.charAt(0)?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",h=this;function y(){if(n){switch(n){case"*":o+=$,i=!0;break;case"?":o+=R,i=!0;break;default:o+="\\"+n}h.debug("clearStateChar %j %j",n,o),n=!1}}for(var v,b=0,g=t.length;b<g&&(v=t.charAt(b));b++)if(this.debug("%s\t%s %s %j",t,b,o,v),a&&U[v])o+="\\"+v,a=!1;else switch(v){case"/":return!1;case"\\":y(),a=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",t,b,o,v),u){this.debug("  in class"),"!"===v&&b===f+1&&(v="^"),o+=v;continue}h.debug("call clearStateChar %j",n),y(),n=v,r.noext&&y();continue;case"(":if(u){o+="(";continue}if(!n){o+="\\(";continue}c.push({type:n,start:b-1,reStart:o.length,open:N[n].open,close:N[n].close}),o+="!"===n?"(?:(?!(?:":"(?:",this.debug("plType %j %j",n,o),n=!1;continue;case")":if(u||!c.length){o+="\\)";continue}y(),i=!0;var d=c.pop();o+=d.close,"!"===d.type&&s.push(d),d.reEnd=o.length;continue;case"|":if(u||!c.length||a){o+="\\|",a=!1;continue}y(),o+="|";continue;case"[":if(y(),u){o+="\\"+v;continue}u=!0,f=b,l=o.length,o+=v;continue;case"]":if(b===f+1||!u){o+="\\"+v,a=!1;continue}if(u)var j,m=t.substring(f+1,b);i=!0,u=!1,o+=v;continue;default:y(),a?a=!1:!U[v]||"^"===v&&u||(o+="\\"),o+=v}u&&(m=t.substr(f+1),j=this.parse(m,J),o=o.substr(0,l)+"\\["+j[0],i=i||j[1]);for(d=c.pop();d;d=c.pop()){var O=o.slice(d.reStart+d.open.length);this.debug("setting tail",o,d),O=O.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(t,e,r){return r||(r="\\"),e+e+r+"|"}),this.debug("tail=%j\n   %s",O,O,d,o);var _="*"===d.type?$:"?"===d.type?R:"\\"+d.type;i=!0,o=o.slice(0,d.reStart)+_+"\\("+O}y(),a&&(o+="\\\\");var w=!1;switch(o.charAt(0)){case".":case"[":case"(":w=!0}for(var A=s.length-1;A>-1;A--){var S=s[A],k=o.slice(0,S.reStart),x=o.slice(S.reStart,S.reEnd-8),E=o.slice(S.reEnd-8,S.reEnd),P=o.slice(S.reEnd);E+=P;var T=k.split("(").length-1,C=P;for(b=0;b<T;b++)C=C.replace(/\)[+*?]?/,"");var M="";""===(P=C)&&e!==J&&(M="$");var F=k+x+P+M+E;o=F}""!==o&&i&&(o="(?=.)"+o);w&&(o=p+o);if(e===J)return[o,i];if(!i)return t.replace(/\\(.)/g,"$1");var L=r.nocase?"i":"";try{var B=new RegExp("^"+o+"$",L)}catch(t){return new RegExp("$.")}return B._glob=t,B._src=o,B};var J={};W.makeRe=function(t,e){return new q(t,e||{}).makeRe()},q.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1,this.regexp;var e=this.options,r=e.noglobstar?$:e.dot?I:G,n=e.nocase?"i":"",o=t.map(function(t){return t.map(function(t){return t===D?r:"string"==typeof t?t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):t._src}).join("\\/")}).join("|");o="^(?:"+o+")$",this.negate&&(o="^(?!"+o+").*$");try{this.regexp=new RegExp(o,n)}catch(t){this.regexp=!1}return this.regexp},W.match=function(t,e,r){var n=new q(e,r=r||{});return t=t.filter(function(t){return n.match(t)}),n.options.nonull&&!t.length&&t.push(e),t},q.prototype.match=function(t,e){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return""===t;if("/"===t&&e)return!0;var r=this.options;"/"!==z.sep&&(t=t.split(z.sep).join("/"));t=t.split(V),this.debug(this.pattern,"split",t);var n,o,i=this.set;for(this.debug(this.pattern,"set",i),o=t.length-1;o>=0&&!(n=t[o]);o--);for(o=0;o<i.length;o++){var a=i[o],c=t;r.matchBase&&1===a.length&&(c=[n]);var s=this.matchOne(c,a,e);if(s)return!!r.flipNegate||!this.negate}return!r.flipNegate&&this.negate},q.prototype.matchOne=function(t,e,r){var n=this.options;this.debug("matchOne",{this:this,file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var o=0,i=0,a=t.length,c=e.length;o<a&&i<c;o++,i++){this.debug("matchOne loop");var s,u=e[i],l=t[o];if(this.debug(e,u,l),!1===u)return!1;if(u===D){this.debug("GLOBSTAR",[e,u,l]);var f=o,p=i+1;if(p===c){for(this.debug("** at the end");o<a;o++)if("."===t[o]||".."===t[o]||!n.dot&&"."===t[o].charAt(0))return!1;return!0}for(;f<a;){var h=t[f];if(this.debug("\nglobstar while",t,f,e,p,h),this.matchOne(t.slice(f),e.slice(p),r))return this.debug("globstar found match!",f,a,h),!0;if("."===h||".."===h||!n.dot&&"."===h.charAt(0)){this.debug("dot detected!",t,f,e,p);break}this.debug("globstar swallow a segment, and continue"),f++}return!(!r||(this.debug("\n>>> no match, partial?",t,f,e,p),f!==a))}if("string"==typeof u?(s=n.nocase?l.toLowerCase()===u.toLowerCase():l===u,this.debug("string match",u,l,s)):(s=l.match(u),this.debug("pattern match",u,l,s)),!s)return!1}if(o===a&&i===c)return!0;if(o===a)return r;if(i===c)return o===a-1&&""===t[o];throw new Error("wtf?")};var X=function(){this.__data__=[],this.size=0};var Y=function(t,e){return t===e||t!=t&&e!=e};var K=function(t,e){for(var r=t.length;r--;)if(Y(t[r][0],e))return r;return-1},Q=Array.prototype.splice;var tt=function(t){var e=this.__data__,r=K(e,t);return!(r<0||(r==e.length-1?e.pop():Q.call(e,r,1),--this.size,0))};var et=function(t){var e=this.__data__,r=K(e,t);return r<0?void 0:e[r][1]};var rt=function(t){return K(this.__data__,t)>-1};var nt=function(t,e){var r=this.__data__,n=K(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function ot(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ot.prototype.clear=X,ot.prototype.delete=tt,ot.prototype.get=et,ot.prototype.has=rt,ot.prototype.set=nt;var it=ot;var at=function(){this.__data__=new it,this.size=0};var ct=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r};var st=function(t){return this.__data__.get(t)};var ut=function(t){return this.__data__.has(t)},lt="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ft(t,e){return t(e={exports:{}},e.exports),e.exports}var pt="object"==typeof lt&&lt&&lt.Object===Object&&lt,ht="object"==typeof self&&self&&self.Object===Object&&self,yt=pt||ht||Function("return this")(),vt=yt.Symbol,bt=Object.prototype,gt=bt.hasOwnProperty,dt=bt.toString,jt=vt?vt.toStringTag:void 0;var mt=function(t){var e=gt.call(t,jt),r=t[jt];try{t[jt]=void 0;var n=!0}catch(t){}var o=dt.call(t);return n&&(e?t[jt]=r:delete t[jt]),o},Ot=Object.prototype.toString;var _t=function(t){return Ot.call(t)},wt="[object Null]",At="[object Undefined]",St=vt?vt.toStringTag:void 0;var kt=function(t){return null==t?void 0===t?At:wt:St&&St in Object(t)?mt(t):_t(t)};var xt=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},Et="[object AsyncFunction]",Pt="[object Function]",Tt="[object GeneratorFunction]",Ct="[object Proxy]";var Mt,Ft=function(t){if(!xt(t))return!1;var e=kt(t);return e==Pt||e==Tt||e==Et||e==Ct},Lt=yt["__core-js_shared__"],Bt=(Mt=/[^.]+$/.exec(Lt&&Lt.keys&&Lt.keys.IE_PROTO||""))?"Symbol(src)_1."+Mt:"";var zt=function(t){return!!Bt&&Bt in t},Dt=Function.prototype.toString;var Nt=function(t){if(null!=t){try{return Dt.call(t)}catch(t){}try{return t+""}catch(t){}}return""},Rt=/^\[object .+?Constructor\]$/,$t=Function.prototype,It=Object.prototype,Gt=$t.toString,Ut=It.hasOwnProperty,Vt=RegExp("^"+Gt.call(Ut).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Ht=function(t){return!(!xt(t)||zt(t))&&(Ft(t)?Vt:Rt).test(Nt(t))};var Wt=function(t,e){return null==t?void 0:t[e]};var qt=function(t,e){var r=Wt(t,e);return Ht(r)?r:void 0},Zt=qt(yt,"Map"),Jt=qt(Object,"create");var Xt=function(){this.__data__=Jt?Jt(null):{},this.size=0};var Yt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Kt="__lodash_hash_undefined__",Qt=Object.prototype.hasOwnProperty;var te=function(t){var e=this.__data__;if(Jt){var r=e[t];return r===Kt?void 0:r}return Qt.call(e,t)?e[t]:void 0},ee=Object.prototype.hasOwnProperty;var re=function(t){var e=this.__data__;return Jt?void 0!==e[t]:ee.call(e,t)},ne="__lodash_hash_undefined__";var oe=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Jt&&void 0===e?ne:e,this};function ie(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ie.prototype.clear=Xt,ie.prototype.delete=Yt,ie.prototype.get=te,ie.prototype.has=re,ie.prototype.set=oe;var ae=ie;var ce=function(){this.size=0,this.__data__={hash:new ae,map:new(Zt||it),string:new ae}};var se=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var ue=function(t,e){var r=t.__data__;return se(e)?r["string"==typeof e?"string":"hash"]:r.map};var le=function(t){var e=ue(this,t).delete(t);return this.size-=e?1:0,e};var fe=function(t){return ue(this,t).get(t)};var pe=function(t){return ue(this,t).has(t)};var he=function(t,e){var r=ue(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function ye(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ye.prototype.clear=ce,ye.prototype.delete=le,ye.prototype.get=fe,ye.prototype.has=pe,ye.prototype.set=he;var ve=ye,be=200;var ge=function(t,e){var r=this.__data__;if(r instanceof it){var n=r.__data__;if(!Zt||n.length<be-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new ve(n)}return r.set(t,e),this.size=r.size,this};function de(t){var e=this.__data__=new it(t);this.size=e.size}de.prototype.clear=at,de.prototype.delete=ct,de.prototype.get=st,de.prototype.has=ut,de.prototype.set=ge;var je=de;var me=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t},Oe=function(){try{var t=qt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var _e=function(t,e,r){"__proto__"==e&&Oe?Oe(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},we=Object.prototype.hasOwnProperty;var Ae=function(t,e,r){var n=t[e];we.call(t,e)&&Y(n,r)&&(void 0!==r||e in t)||_e(t,e,r)};var Se=function(t,e,r,n){var o=!r;r||(r={});for(var i=-1,a=e.length;++i<a;){var c=e[i],s=n?n(r[c],t[c],c,r,t):void 0;void 0===s&&(s=t[c]),o?_e(r,c,s):Ae(r,c,s)}return r};var ke=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n};var xe=function(t){return null!=t&&"object"==typeof t},Ee="[object Arguments]";var Pe=function(t){return xe(t)&&kt(t)==Ee},Te=Object.prototype,Ce=Te.hasOwnProperty,Me=Te.propertyIsEnumerable,Fe=Pe(function(){return arguments}())?Pe:function(t){return xe(t)&&Ce.call(t,"callee")&&!Me.call(t,"callee")},Le=Array.isArray;var Be=function(){return!1},ze=ft(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r?yt.Buffer:void 0,i=(o?o.isBuffer:void 0)||Be;t.exports=i}),De=9007199254740991,Ne=/^(?:0|[1-9]\d*)$/;var Re=function(t,e){var r=typeof t;return!!(e=null==e?De:e)&&("number"==r||"symbol"!=r&&Ne.test(t))&&t>-1&&t%1==0&&t<e},$e=9007199254740991;var Ie=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=$e},Ge={};Ge["[object Float32Array]"]=Ge["[object Float64Array]"]=Ge["[object Int8Array]"]=Ge["[object Int16Array]"]=Ge["[object Int32Array]"]=Ge["[object Uint8Array]"]=Ge["[object Uint8ClampedArray]"]=Ge["[object Uint16Array]"]=Ge["[object Uint32Array]"]=!0,Ge["[object Arguments]"]=Ge["[object Array]"]=Ge["[object ArrayBuffer]"]=Ge["[object Boolean]"]=Ge["[object DataView]"]=Ge["[object Date]"]=Ge["[object Error]"]=Ge["[object Function]"]=Ge["[object Map]"]=Ge["[object Number]"]=Ge["[object Object]"]=Ge["[object RegExp]"]=Ge["[object Set]"]=Ge["[object String]"]=Ge["[object WeakMap]"]=!1;var Ue=function(t){return xe(t)&&Ie(t.length)&&!!Ge[kt(t)]};var Ve=function(t){return function(e){return t(e)}},He=ft(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r&&pt.process,i=function(){try{var t=n&&n.require&&n.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=i}),We=He&&He.isTypedArray,qe=We?Ve(We):Ue,Ze=Object.prototype.hasOwnProperty;var Je=function(t,e){var r=Le(t),n=!r&&Fe(t),o=!r&&!n&&ze(t),i=!r&&!n&&!o&&qe(t),a=r||n||o||i,c=a?ke(t.length,String):[],s=c.length;for(var u in t)!e&&!Ze.call(t,u)||a&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Re(u,s))||c.push(u);return c},Xe=Object.prototype;var Ye=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Xe)};var Ke=function(t,e){return function(r){return t(e(r))}},Qe=Ke(Object.keys,Object),tr=Object.prototype.hasOwnProperty;var er=function(t){if(!Ye(t))return Qe(t);var e=[];for(var r in Object(t))tr.call(t,r)&&"constructor"!=r&&e.push(r);return e};var rr=function(t){return null!=t&&Ie(t.length)&&!Ft(t)};var nr=function(t){return rr(t)?Je(t):er(t)};var or=function(t,e){return t&&Se(e,nr(e),t)};var ir=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e},ar=Object.prototype.hasOwnProperty;var cr=function(t){if(!xt(t))return ir(t);var e=Ye(t),r=[];for(var n in t)("constructor"!=n||!e&&ar.call(t,n))&&r.push(n);return r};var sr=function(t){return rr(t)?Je(t,!0):cr(t)};var ur=function(t,e){return t&&Se(e,sr(e),t)},lr=ft(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r?yt.Buffer:void 0,i=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var r=t.length,n=i?i(r):new t.constructor(r);return t.copy(n),n}});var fr=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e};var pr=function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i};var hr=function(){return[]},yr=Object.prototype.propertyIsEnumerable,vr=Object.getOwnPropertySymbols,br=vr?function(t){return null==t?[]:(t=Object(t),pr(vr(t),function(e){return yr.call(t,e)}))}:hr;var gr=function(t,e){return Se(t,br(t),e)};var dr=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t},jr=Ke(Object.getPrototypeOf,Object),mr=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)dr(e,br(t)),t=jr(t);return e}:hr;var Or=function(t,e){return Se(t,mr(t),e)};var _r=function(t,e,r){var n=e(t);return Le(t)?n:dr(n,r(t))};var wr=function(t){return _r(t,nr,br)};var Ar=function(t){return _r(t,sr,mr)},Sr=qt(yt,"DataView"),kr=qt(yt,"Promise"),xr=qt(yt,"Set"),Er=qt(yt,"WeakMap"),Pr=Nt(Sr),Tr=Nt(Zt),Cr=Nt(kr),Mr=Nt(xr),Fr=Nt(Er),Lr=kt;(Sr&&"[object DataView]"!=Lr(new Sr(new ArrayBuffer(1)))||Zt&&"[object Map]"!=Lr(new Zt)||kr&&"[object Promise]"!=Lr(kr.resolve())||xr&&"[object Set]"!=Lr(new xr)||Er&&"[object WeakMap]"!=Lr(new Er))&&(Lr=function(t){var e=kt(t),r="[object Object]"==e?t.constructor:void 0,n=r?Nt(r):"";if(n)switch(n){case Pr:return"[object DataView]";case Tr:return"[object Map]";case Cr:return"[object Promise]";case Mr:return"[object Set]";case Fr:return"[object WeakMap]"}return e});var Br=Lr,zr=Object.prototype.hasOwnProperty;var Dr=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&zr.call(t,"index")&&(r.index=t.index,r.input=t.input),r},Nr=yt.Uint8Array;var Rr=function(t){var e=new t.constructor(t.byteLength);return new Nr(e).set(new Nr(t)),e};var $r=function(t,e){var r=e?Rr(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)},Ir=/\w*$/;var Gr=function(t){var e=new t.constructor(t.source,Ir.exec(t));return e.lastIndex=t.lastIndex,e},Ur=vt?vt.prototype:void 0,Vr=Ur?Ur.valueOf:void 0;var Hr=function(t){return Vr?Object(Vr.call(t)):{}};var Wr=function(t,e){var r=e?Rr(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)},qr="[object Boolean]",Zr="[object Date]",Jr="[object Map]",Xr="[object Number]",Yr="[object RegExp]",Kr="[object Set]",Qr="[object String]",tn="[object Symbol]",en="[object ArrayBuffer]",rn="[object DataView]",nn="[object Float32Array]",on="[object Float64Array]",an="[object Int8Array]",cn="[object Int16Array]",sn="[object Int32Array]",un="[object Uint8Array]",ln="[object Uint8ClampedArray]",fn="[object Uint16Array]",pn="[object Uint32Array]";var hn=function(t,e,r){var n=t.constructor;switch(e){case en:return Rr(t);case qr:case Zr:return new n(+t);case rn:return $r(t,r);case nn:case on:case an:case cn:case sn:case un:case ln:case fn:case pn:return Wr(t,r);case Jr:return new n;case Xr:case Qr:return new n(t);case Yr:return Gr(t);case Kr:return new n;case tn:return Hr(t)}},yn=Object.create,vn=function(){function t(){}return function(e){if(!xt(e))return{};if(yn)return yn(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();var bn=function(t){return"function"!=typeof t.constructor||Ye(t)?{}:vn(jr(t))},gn="[object Map]";var dn=function(t){return xe(t)&&Br(t)==gn},jn=He&&He.isMap,mn=jn?Ve(jn):dn,On="[object Set]";var _n=function(t){return xe(t)&&Br(t)==On},wn=He&&He.isSet,An=wn?Ve(wn):_n,Sn=1,kn=2,xn=4,En="[object Arguments]",Pn="[object Function]",Tn="[object GeneratorFunction]",Cn="[object Object]",Mn={};Mn[En]=Mn["[object Array]"]=Mn["[object ArrayBuffer]"]=Mn["[object DataView]"]=Mn["[object Boolean]"]=Mn["[object Date]"]=Mn["[object Float32Array]"]=Mn["[object Float64Array]"]=Mn["[object Int8Array]"]=Mn["[object Int16Array]"]=Mn["[object Int32Array]"]=Mn["[object Map]"]=Mn["[object Number]"]=Mn[Cn]=Mn["[object RegExp]"]=Mn["[object Set]"]=Mn["[object String]"]=Mn["[object Symbol]"]=Mn["[object Uint8Array]"]=Mn["[object Uint8ClampedArray]"]=Mn["[object Uint16Array]"]=Mn["[object Uint32Array]"]=!0,Mn["[object Error]"]=Mn[Pn]=Mn["[object WeakMap]"]=!1;var Fn=function t(e,r,n,o,i,a){var c,s=r&Sn,u=r&kn,l=r&xn;if(n&&(c=i?n(e,o,i,a):n(e)),void 0!==c)return c;if(!xt(e))return e;var f=Le(e);if(f){if(c=Dr(e),!s)return fr(e,c)}else{var p=Br(e),h=p==Pn||p==Tn;if(ze(e))return lr(e,s);if(p==Cn||p==En||h&&!i){if(c=u||h?{}:bn(e),!s)return u?Or(e,ur(c,e)):gr(e,or(c,e))}else{if(!Mn[p])return i?e:{};c=hn(e,p,s)}}a||(a=new je);var y=a.get(e);if(y)return y;if(a.set(e,c),An(e))return e.forEach(function(o){c.add(t(o,r,n,o,e,a))}),c;if(mn(e))return e.forEach(function(o,i){c.set(i,t(o,r,n,i,e,a))}),c;var v=l?u?Ar:wr:u?keysIn:nr,b=f?void 0:v(e);return me(b||e,function(o,i){b&&(o=e[i=o]),Ae(c,i,t(o,r,n,i,e,a))}),c},Ln=1,Bn=4;var zn=function(t){return Fn(t,Ln|Bn)};window&&(window.minimatch=B);var Dn,Nn={rcType:p,rcObject:f,name:"util",isAsyncFunction:function(t){var e=t.toString().trim();return!(!e.match(/^async /)&&!e.match(/return _ref[^\.]*\.apply/))},minimatch:B,normalizePath:function(t){return"string"==typeof t?t.split(/[\.\\/]/):t},cloneDeep:zn};!function(t){t.pre="pre",t.fin="fin"}(Dn||(Dn={}));var Rn=function(){function r(t){e(this,r),this.filters={pre:{},fin:{},get:{}},this.globFilters=[],this.options=Object.assign({},r.DEFAULT_OPTIONS,t)}return n(r,[{key:"addFilter",value:function(t){if(Array.isArray(t.path)){var e=this.filters[t.type],r=Nn.rcObject.getObjectValueByNames(e,a(t.path).concat(["[GOB:FILTERS NODE]"]),void 0);if(void 0===r)Nn.rcObject.setObjectValueByNames(e,a(t.path).concat(["[GOB:FILTERS NODE]"]),[t]);else{if(!r.push)throw Error("[Gob] FilterManager.addFilter() filters Node not found. path:"+JSON.stringify(t.path));r.push(t)}return t}return this.globFilters.push(t),t}},{key:"getFilters",value:function(t,e){var r=this,n=this.filters[e],o=Nn.rcObject.getObjectValueByNames(n,a(t).concat(["[GOB:FILTERS NODE]"]),void 0),i=this.globFilters.filter(function(e){return e.path instanceof RegExp?e.path.test(t.join(r.options.pathSeparator)):Nn.minimatch(t.join(r.options.pathSeparator),e.path)});return void 0==o&&(o=[]),void 0==i&&(i=[]),a(o).concat(a(i))}},{key:"removeFilter",value:function(t){var e=null;if(Array.isArray(t.path)){var r=this.filters[t.type];e=Nn.rcObject.getObjectValueByNames(r,a(t.path).concat(["[GOB:FILTERS NODE]"]),void 0)}else e=this.globFilters;if(e)for(var n=0;n<e.length;n++)if(e[n]===t)return e.splice(n,1),!0}},{key:"newFilter",value:function(e,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5,a=arguments.length>5?arguments[5]:void 0;if("function"!=typeof n)throw Error("[Gob] FilterManager.newFilter(), func is not a functin. func is "+t(n));if(!(Array.isArray(e)||e instanceof RegExp||"string"==typeof e))throw Error("[Gob] FilterManager.newFilter(), path is not a Array|String|RegExp. path is "+t(e));if(!this.filters[r])throw Error('[Gob] FilterManager.newFilter(), type is not a FilterType: "fin", "pre", "get". type is '+r);var c={path:e,type:r,name:o,func:n,isAsync:a,level:i,disable:!1};return void 0==a&&(c.isAsync=Nn.isAsyncFunction(n)),c}}]),r}();Rn.DEFAULT_OPTIONS={pathSeparator:"."};var $n=null;function In(t,e,r){$n={stimuliType:t,path:e,localDataIsArray:r}}var Gn=Nn.rcObject,Un=function(){function t(r){e(this,t),this.stimuliLog={changes:[],visits:[],indexes:{set:0,get:0,delete:0,all:0},latestPath:null,latestType:null},this.gobCore=r}return n(t,[{key:"receptor",value:function(t,e){for(var r=this.gobCore.filterManager.getFilters(t.path,Dn.pre),n=0;n<r.length&&!r[n].isAsync;n++);return this.react(t,e)}},{key:"react",value:function(t,e){console.log("[receptor]",e?"<Handler>":"<noHandler>",t.type,t.path),e&&(function(t,e,r){var n=Array.isArray(r.localData);return n&&"length"===e[e.length-1]&&$n&&"set"===$n.stimuliType&&1==$n.localDataIsArray&&$n.path&&"length"!==$n.path[$n.path.length-1]?(In(t,e,n),!0):(In(t,e,n),!1)}(t.type,Nn.normalizePath(t.path),e)||this.gobCore.recorder.recOnce(t));t.type;var r=Nn.normalizePath(t.path),n=t.value,o=this.gobCore.handler.set,i=this.gobCore.handler.get,a=this.gobCore.handler.delete;switch(t.type){case"get":return e?i(r,r[r.length-1],e):Gn.getObjectValueByNames(this.gobCore.proxy,r,null);case"set":return e?o(r,n,r[r.length-1],e):Gn.setObjectValueByNames(this.gobCore.proxy,r,n);case"delete":return e?a(r,n,r[r.length-1],e):Gn.deleteObjectValueByNames(this.gobCore.proxy,r)}}}]),t}(),Vn=function t(){e(this,t)},Hn="[PROXY]";Nn.rcType;Nn.rcType,Nn.rcObject;Nn.rcType;var Wn="[Gob Core]";function qn(){}function Zn(t,e,r,n,o,i){var c,s={localData:e,localGate:r,state:{coreData:t.data,coreGate:t.gate,gobCore:t,GOB_CORE_NAME:Wn}},u={enumerable:!0,configurable:!0,get:function(){return t.stimuliBus.receptor({type:"get",path:i,value:void 0,origin:null},s)},set:function(e){return t.stimuliBus.receptor({type:"set",path:i,value:e,origin:null},s)}};Object.defineProperty(r,n,u),r.$get||(c||(c=i.slice(0,i.length-1)),Object.defineProperty(r,"$get",{enumerable:!1,configurable:!1,get:function(){return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Nn.normalizePath(e),o=a(c).concat(a(n));console.log("es5 $get",o);var i=t.stimuliBus.receptor({type:"get",path:o,value:void 0,origin:r});return console.log("es5 $get",{nowFullPath:o},{re:i}),i}}})),r.$set||(c||(c=i.slice(0,i.length-1)),Object.defineProperty(r,"$set",{enumerable:!1,configurable:!1,get:function(){return function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=Nn.normalizePath(e),i=a(c).concat(a(o));return console.log("es5 $set",i,r),t.stimuliBus.receptor({type:"set",path:i,value:r,origin:n})}}})),r.$delete||(c||(c=i.slice(0,i.length-1)),Object.defineProperty(r,"$delete",{enumerable:!1,configurable:!1,get:function(){return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Nn.normalizePath(e),o=a(c).concat(a(n)),i=t.stimuliBus.receptor({type:"delete",path:o,value:void 0,origin:r});return console.log("es5 $delete",{nowFullPath:o},{re:i}),i}}})),r.$core||Object.defineProperty(r,"$core",{enumerable:!1,configurable:!1,get:function(){return t}})}var Jn=Nn.rcType,Xn=Nn.rcObject;function Yn(e,r,n,o){var i=Jn.getType(r);return console.log("[set]","fullPath:",e,{valueType:i,key:n,value:r}),"object"===i||"array"===i?(o.localData[n]=r,Qn(r,[n],e,o),Xn.pathEach(r,function(r,i){console.log("pathEach type:",t(r),{item:r,path:i}),eo(r)?Qn(r,[n].concat(a(i)),a(e).concat(a(i)),o):to(r,[n].concat(a(i)),a(e).concat(a(i)),o)},Kn)):o.localData[n]=r,!0}function Kn(t,e,r){}function Qn(e,r,n,o){console.log("creatGate",{inData:e,targetPath:r,fullPath:n,handlerContext:o});o.state.gobCore;var i={};Object.defineProperty(i,Hn,{enumerable:!1,configurable:!0,value:e});var c,s=r.slice(0,r.length-1),u=r[r.length-1];return c=0==s.length?o.localGate:Xn.getObjectValueByNames(o.localGate,s,null),Object.defineProperty(c,u,{enumerable:!0,configurable:!0,get:function(){return console.log("vGate get"),i},set:function(e){return console.log("vGate set",e,{handlerContext:o}),eo(e)?(o.localData[u]=e,Qn(e,r,n,o),Xn.pathEach(e,function(e,r){console.log("pathEach type:",t(e),{item:e,path:r}),eo(e)?Qn(e,[u].concat(a(r)),a(n).concat(a(r)),o):to(e,[u].concat(a(r)),a(n).concat(a(r)),o)},Kn)):i=e,o.localData[u]=e,!0}}),i}function to(t,e,r,n){var o=n.state.gobCore,i=e.slice(0,e.length-1),a=e[e.length-1];console.log("creatDefine",{inData:t,targetPath:e,fullPath:r,handlerContext:n,key:a,parentPath:i});var c=Xn.getObjectValueByNames(n.localGate,i,null);Zn(o,Xn.getObjectValueByNames(n.localData,i,null),c,a,0,r)}function eo(e){return"object"===t(e)}var ro=Nn.rcType;function no(t,e,r){var n=r.localData[e];console.log("[Es5Handler get]",t,{localData:r.localData,key:e});var o=ro.getType(n);return console.log("  [Es5Handler get value]",n,o),console.log("  Es5Handler return value",n),n}var oo=function(t){function r(){var t;return e(this,r),(t=i(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))).delete=qn,t.get=no,t.set=Yn,t}return o(r,Vn),n(r,[{key:"createGobProxy",value:function(t,e){if(e)for(var r in e)Zn(t,t.data,t.gate,r,e[r],[r]),t.gate[r]=e[r];else Zn(t,t.data,t,"gate",0,[]);return t.gate}}]),r}(),io=function(){function t(r){e(this,t),this.logs={changes:[],visits:[],indexes:{set:0,get:0,delete:0,all:0},latestPath:null,latestType:null},this.gobCore=r}return n(t,[{key:"recOnce",value:function(t){var e=this;if(!0!==this.gobCore.options.disableLog&&(!this.gobCore.options.logType||!1!==this.gobCore.options.logType[t.type])){this.logs.latestPath=Nn.normalizePath(t.path),this.logs.latestType=t.type;var r=this.logs.indexes.all++,n=this.logs.indexes[t.type]++;!0===this.gobCore.options.syncLog?this._recStimuli(t,r,n):setTimeout(function(){e._recStimuli(t,r,n)},0)}}},{key:"_recStimuli",value:function(t,e,r){var n={type:t.type,path:Nn.normalizePath(t.path),value:Nn.cloneDeep(t.value),origin:Nn.cloneDeep(t.origin),info:{index:e,typeIndex:r}};"set"===t.type||"delete"===t.type?this.logs.changes.push(n):this.logs.visits.push(n)}},{key:"getLatestStimuliInfo",value:function(){if(this.logs.latestType)return{type:this.logs.latestType,path:this.logs.latestPath}}}]),t}(),ao=function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,t),this.stimuliBus=new Un(this),this.filterManager=new Rn({pathSeparator:"."}),this.recorder=new io(this),this.isGob=3,this.data={},this.gate={},this.options=Object.assign({},t.DEFAULT_OPTIONS,r);console.info("[use Es5Handler]"),this.handler=new oo};ao.DEFAULT_OPTIONS={syncLog:!1,disableLog:!1,logType:{set:!0,get:!1,delete:!0},logSize:2048};var co=function(t,e){var r=new ao(e),n=r.handler.createGobProxy(r,t);return r.proxy=n,n};return co.default={options:{}},co.GOB_CORE_NAME=Wn,co.inspect=function(t){if(t[Wn])return t[Wn];throw Error("[Gob] Gob.inspect: param is not Gob3 Instance. :"+t)},co});
